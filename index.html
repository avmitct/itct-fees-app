<!doctype html>
<html lang="mr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ITCT Admission System (Cloud)</title>

  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="styles.css">

  <!-- Remix Icons -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/remixicon@4.3.0/fonts/remixicon.css"
  />
</head>

<body>
  <!-- HEADER -->
  <header class="header">
    <div class="header-inner">
      <img src="logo.jpg" class="logo" alt="ITCT Logo" onerror="this.style.display='none'">
      <div class="title">
        <div class="name">ITCT Computer Education</div>
        <div class="location">Nandurbar</div>
      </div>
    </div>
    <p class="sub">Admission System ‚Äì Supabase Cloud</p>
  </header>

  <main>

    <!-- ================= LOGIN ================= -->
    <section id="login-section" class="card card-with-art">
      <div class="card-main">
        <h2><i class="ri-shield-user-line"></i> Login</h2>
        <p class="note">‡§ï‡•É‡§™‡§Ø‡§æ admin ‡§ï‡§ø‡§Ç‡§µ‡§æ user credentials ‡§µ‡§æ‡§™‡§∞‡•Ç‡§® ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡§æ.</p>

        <input id="login-username" placeholder="Username">
        <input id="login-password" type="password" placeholder="Password">

        <div class="row" style="margin-top:8px;">
          <button id="login-btn">
            <i class="ri-login-circle-line"></i> Login
          </button>
        </div>
      </div>

      <div class="card-art">
        <!-- SVG Illustration -->
        <svg viewBox="0 0 140 100" aria-hidden="true">
          <defs>
            <linearGradient id="gradLogin" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0%" stop-color="#f4a300"/>
              <stop offset="100%" stop-color="#9b4dcc"/>
            </linearGradient>
          </defs>

          <rect x="15" y="12" width="110" height="76" rx="10"
                fill="#f7efff" stroke="#9b4dcc" stroke-width="1.5"/>
          <rect x="30" y="32" width="80" height="10" rx="5" fill="#e1d4ff"/>
          <rect x="30" y="50" width="58" height="10" rx="5" fill="#e1d4ff"/>
          <circle cx="98" cy="55" r="9" fill="url(#gradLogin)"/>
          <rect x="93" y="50" width="10" height="11" rx="3" fill="#fff"/>
          <circle cx="98" cy="49" r="3.2" fill="#fff"/>
        </svg>
      </div>
    </section>

    <!-- ================= MAIN APP ================= -->
    <section id="app-section" class="hidden">

      <!-- Top User Bar -->
      <div id="user-bar" class="card user-bar">
        <div>
          üë§ Logged in as:
          <strong id="current-user-name"></strong>
          (<span id="current-user-role"></span>)
        </div>

        <button id="logout-btn" class="secondary">
          <i class="ri-logout-circle-r-line"></i> Logout
        </button>
      </div>

      <!-- Toolbar -->
      <div class="toolbar">
        <button id="dashboard-btn"><i class="ri-home-3-line"></i> Dashboard</button>
        <button id="manage-courses-btn"><i class="ri-book-2-line"></i> Courses</button>
        <button id="add-student-btn"><i class="ri-user-add-line"></i> ‡§®‡§µ‡•Ä‡§® ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•Ä</button>
        <button id="enquiry-btn"><i class="ri-question-answer-line"></i> Enquiry</button>
        <button id="students-list-btn"><i class="ri-team-line"></i> Student List</button>
        <button id="reports-btn"><i class="ri-bar-chart-2-line"></i> Reports</button>
        <button id="settings-btn"><i class="ri-settings-3-line"></i> Settings</button>
        <button id="backup-btn" class="hidden"><i class="ri-cloud-line"></i> Backup</button>
      </div>

      <!-- ================= Dashboard ================= -->
      <section id="dashboard-section" class="card card-with-art">
        <div class="card-main">
          <h3><i class="ri-dashboard-line"></i> Dashboard</h3>
          <p class="note">‡§á‡§•‡•á ‡§è‡§ï‡•Ç‡§£ ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•Ä ‡§µ ‡§´‡•Ä‡§ö‡•Ä quick summary ‡§¶‡§ø‡§∏‡•á‡§≤.</p>

          <div id="dash-total-students">Total students: 0</div>
          <div id="dash-total-fee">Total course fee: ‚Çπ0</div>
          <div id="dash-total-paid">Total paid: ‚Çπ0</div>
          <div id="dash-total-discount">Total discount: ‚Çπ0</div>
          <div id="dash-total-balance">Total balance: ‚Çπ0</div>
        </div>

        <div class="card-art">
          <!-- SVG Dashboard Illustration -->
          <svg viewBox="0 0 160 100" aria-hidden="true">
            <defs>
              <linearGradient id="gradDash" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" stop-color="#9b4dcc"/>
                <stop offset="100%" stop-color="#f4a300"/>
              </linearGradient>
            </defs>

            <rect x="10" y="14" width="140" height="70" rx="12"
                  fill="#f7efff" stroke="#9b4dcc" stroke-width="1.5"/>

            <polyline points="20,70 45,55 72,62 102,38 130,46"
                      fill="none" stroke="url(#gradDash)" stroke-width="3"
                      stroke-linecap="round" stroke-linejoin="round"/>

            <circle cx="45" cy="55" r="3" fill="#9b4dcc"/>
            <circle cx="72" cy="62" r="3" fill="#9b4dcc"/>
            <circle cx="102" cy="38" r="3" fill="#9b4dcc"/>
          </svg>
        </div>
      </section>

     <!-- COURSES SECTION -->
<section id="courses-section" class="hidden">
  <h2>Courses</h2>

  <div class="course-form">
    <input type="text" id="course-name" placeholder="Course name">
    <input type="number" id="course-fee" placeholder="Fee (‚Çπ)">
    <button type="button" id="save-course-btn">+ Add Course</button>
  </div>

  <ul id="course-list"></ul>
</section>


      <!-- ================= Student Form ================= -->
      <section id="student-form" class="card hidden">
        <h3><i class="ri-user-3-line"></i> ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•ç‡§Ø‡§æ‡§ö‡•Ä ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä</h3>

        <input id="name" placeholder="‡§®‡§æ‡§µ *">
        <input id="dob" placeholder="DOB (YYYY-MM-DD)" type="date">
        <input id="age" placeholder="‡§µ‡§Ø" readonly>
        <input id="address" placeholder="‡§™‡§§‡•ç‡§§‡§æ">
        <input id="mobile" placeholder="‡§Æ‡•ã‡§¨‡§æ‡§à‡§≤ 1 *" maxlength="10">
        <input id="mobile2" placeholder="‡§Æ‡•ã‡§¨‡§æ‡§à‡§≤ 2 (optional)" maxlength="10">

        <hr>

        <h4>üéì Course ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä</h4>

        <select id="course-select"></select>
        <input id="course-duedate" type="date">

        <div class="row">
          <button id="save-student-btn"><i class="ri-save-3-line"></i> ‡§ú‡§§‡§® ‡§ï‡§∞‡§æ</button>
          <button id="cancel-student-btn" class="secondary">
            <i class="ri-close-circle-line"></i> ‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡§æ
          </button>
        </div>
      </section>

      <!-- ================= Enquiry ================= -->
      <section id="enquiry-section" class="card card-with-art hidden">
        <div class="card-main">
          <h3><i class="ri-question-answer-line"></i> Enquiry</h3>

          <div class="enq-form">
            <input id="enq-name" placeholder="‡§®‡§æ‡§µ *">
            <input id="enq-dob" type="date" placeholder="DOB">
            <input id="enq-age" placeholder="‡§µ‡§Ø" readonly>
            <input id="enq-mobile" maxlength="10" placeholder="‡§Æ‡•ã‡§¨‡§æ‡§à‡§≤ 1 *">
            <input id="enq-mobile2" maxlength="10" placeholder="‡§Æ‡•ã‡§¨‡§æ‡§à‡§≤ 2 (optional)">
            <select id="enq-course-select"></select>

            <div class="row">
              <button id="save-enquiry-btn"><i class="ri-save-3-line"></i> Save</button>
              <button id="clear-enquiry-btn" class="secondary">
                <i class="ri-eraser-line"></i> Clear
              </button>
            </div>
          </div>

          <hr>

          <h4>üìã Enquiry List</h4>
          <input id="enq-search" placeholder="‡§∂‡•ã‡§ß... ‡§®‡§æ‡§µ / ‡§Æ‡•ã‡§¨‡§æ‡§à‡§≤ / ‡§ï‡•ã‡§∞‡•ç‡§∏">
          <ul id="enquiry-list"></ul>
        </div>

        <div class="card-art">
          <!-- Enquiry illustration -->
          <svg viewBox="0 0 150 100" aria-hidden="true">
            <defs>
              <linearGradient id="gradEnq" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" stop-color="#f4a300"/>
                <stop offset="100%" stop-color="#9b4dcc"/>
              </linearGradient>
            </defs>
            <rect x="18" y="18" width="114" height="64" rx="10"
                  fill="#fdf7ff" stroke="#9b4dcc" stroke-width="1.5"/>
            <rect x="30" y="30" width="90" height="9" rx="4.5" fill="#e8dafd"/>
            <rect x="30" y="45" width="70" height="9" rx="4.5" fill="#fbe1b0"/>
            <circle cx="46" cy="72" r="10.5" fill="url(#gradEnq)"/>
          </svg>
        </div>
      </section>

      <!-- ================= Student List ================= -->
      <section id="students-list" class="card">
        <h3><i class="ri-team-line"></i> ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•Ä ‡§Ø‡§æ‡§¶‡•Ä</h3>
        <input id="search" placeholder="‡§∂‡•ã‡§ß... ‡§®‡§æ‡§µ / ‡§Æ‡•ã‡§¨‡§æ‡§à‡§≤ / ‡§ï‡•ã‡§∞‡•ç‡§∏">
        <ul id="list"></ul>
      
  <div id="students-list-container"></div>
</section>

      <!-- ================= Reports ================= -->
      <section id="reports-section" class="card card-with-art hidden">
        <div class="card-main">
          <h3><i class="ri-bar-chart-2-line"></i> Reports</h3>

          <div class="row">
            <select id="report-course"><option value="">-- ‡§∏‡§∞‡•ç‡§µ ‡§ï‡•ã‡§∞‡•ç‡§∏ --</option></select>
            <input id="report-from" type="date">
            <input id="report-to" type="date">
          </div>

          <div class="row">
            <button id="generate-payment-report">Payment</button>
            <button id="generate-balance-report">Balance</button>
            <button id="generate-due-report">Due</button>
            <button id="generate-enquiry-report">Enquiry</button>
            <button id="export-csv"><i class="ri-file-excel-2-line"></i> Export</button>
          </div>

          <div id="report-output"></div>
        </div>

        <div class="card-art">
          <!-- SVG Reports -->
          <svg viewBox="0 0 150 100" aria-hidden="true">
            <defs>
              <linearGradient id="gradRep" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" stop-color="#9b4dcc"/>
                <stop offset="100%" stop-color="#f4a300"/>
              </linearGradient>
            </defs>
            <rect x="18" y="16" width="114" height="68" rx="10"
                  fill="#f7efff" stroke="#9b4dcc" stroke-width="1.5"/>
            <rect x="35" y="46" width="10" height="24" rx="2" fill="#e7d7ff"/>
            <rect x="57" y="40" width="10" height="30" rx="2" fill="#f9e0b0"/>
            <rect x="79" y="52" width="10" height="18" rx="2" fill="#e7d7ff"/>
            <rect x="101" y="36" width="10" height="34" rx="2" fill="url(#gradRep)"/>
          </svg>
        </div>
      </section>

      <!-- ================= Backup ================= -->
      <section id="backup-section" class="card card-with-art hidden">
        <div class="card-main">
          <h3><i class="ri-cloud-line"></i> Backup</h3>
          <button id="backup-students">Download Students</button>
          <button id="backup-fees">Download Fees</button>
          <button id="backup-courses">Download Courses</button>
        </div>

        <div class="card-art">
          <!-- SVG Cloud Backup -->
          <svg viewBox="0 0 150 100" aria-hidden="true">
            <defs>
              <linearGradient id="gradCloud" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" stop-color="#f4a300"/>
                <stop offset="100%" stop-color="#9b4dcc"/>
              </linearGradient>
            </defs>

            <circle cx="55" cy="52" r="16" fill="#f7efff"/>
            <circle cx="76" cy="46" r="20" fill="#f7efff"/>
            <rect x="46" y="52" width="60" height="20" rx="10"
                  fill="#f7efff" stroke="#9b4dcc" stroke-width="1.5"/>

            <path d="M76 48v13" stroke="url(#gradCloud)" stroke-width="3"
                  stroke-linecap="round"/>
            <path d="M70 56l6 6 6-6" fill="none"
                  stroke="url(#gradCloud)" stroke-width="3"
                  stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
      </section>

      <!-- ================= Settings ================= -->
      <section id="settings-section" class="card hidden">
        <h3><i class="ri-settings-3-line"></i> Settings</h3>

        <!-- Change Password -->
        <div class="settings-block">
          <h4>üîë Change Admin Password</h4>
          <input id="new-pass" type="password" placeholder="New password">
          <button id="change-pass-btn">Change</button>
        </div>

        <!-- Add User -->
        <div class="settings-block">
          <h4>üë§ Add User</h4>
          <input id="new-user-username" placeholder="Username">
          <input id="new-user-password" type="password" placeholder="Password">
          <select id="new-user-role">
            <option value="data-entry">Data Entry</option>
            <option value="admin">Admin</option>
          </select>
          <button id="add-user-btn">Add User</button>
          <p class="note">‡§ü‡•Ä‡§™: Users Supabase ‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§ú‡§§‡§® ‡§π‡•ã‡§§‡§æ‡§§.</p>
        </div>

        <!-- WhatsApp Templates & Followup -->
        <div class="settings-block">
          <h4>üì≤ WhatsApp Templates & Follow-up</h4>

          <label for="wa-inst-name">Institute name (for message)</label>
          <input id="wa-inst-name" placeholder="Institute name">

          <label for="wa-tpl-initial">Initial Enquiry Message</label>
          <textarea id="wa-tpl-initial" rows="3"
            placeholder="‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞ {NAME}, ‡§Ü‡§™‡§£ {COURSE} ‡§ï‡•ã‡§∞‡•ç‡§∏ ‡§¨‡§¶‡•ç‡§¶‡§≤ enquiry ‡§ï‡•á‡§≤‡•Ä ‡§π‡•ã‡§§‡•Ä..."></textarea>

          <label for="wa-tpl-followup">Follow-up / Reminder Message</label>
          <textarea id="wa-tpl-followup" rows="3"
            placeholder="‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞ {NAME}, ‡§Ü‡§™‡§≤‡•ç‡§Ø‡§æ {COURSE} ‡§ï‡•ã‡§∞‡•ç‡§∏ ‡§¨‡§æ‡§¨‡§§‡§ö‡•Ä enquiry ‡§ö‡§æ follow-up..."></textarea>

          <div class="row">
            <div style="flex:1; min-width:140px;">
              <label for="wa-initial-days">Initial period (days)</label>
              <input id="wa-initial-days" type="number" min="0" value="0">
            </div>
            <div style="flex:1; min-width:140px;">
              <label for="wa-followup-days">Follow-up after (days)</label>
              <input id="wa-followup-days" type="number" min="1" value="3">
            </div>
          </div>

          <p class="note">
            Placeholders: <code>{NAME}</code>, <code>{COURSE}</code>, <code>{AGE}</code>, <code>{MOBILE}</code>, <code>{INSTITUTE}</code>
          </p>

          <button id="wa-save-settings">Save WhatsApp Settings</button>
        </div>

        <!-- User List -->
        <div class="settings-block">
          <h4>üìú User List</h4>
          <ul id="users-list"></ul>
        </div>

      </section>
    </section>
  </main>

  <!-- STUDENT LIST TEMPLATE -->
  <template id="student-item-tpl">
    <li class="student-item">
      <div class="info">
        <strong class="s-name"></strong>
        <div class="s-meta"></div>
      </div>
      <div class="actions">
        <button class="pay-btn">‡§´‡•Ä‡§∏ ‡§≠‡§∞‡§æ</button>
        <button class="view-btn">‡§™‡§π‡§æ</button>
        <button class="delete-btn admin-only">‡§π‡§ü‡§µ‡§æ</button>
      </div>
    </li>
  </template>

  <!-- MODAL -->
  <div id="modal" class="hidden"></div>

  <!-- Supabase client -->
  <script src="https://unpkg.com/@supabase/supabase-js@2.48.0/dist/umd/supabase.js"></script>

  <script>
    // Put your Supabase project URL & ANON key here (these were in older file)
    const SUPABASE_URL  = "https://lbepbdnoowbestqhfupm.supabase.co";
    const SUPABASE_ANON = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxiZXBiZG5vb3diZXN0cWhmdXBtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUwODMxMjcsImV4cCI6MjA4MDY1OTEyN30.wH-fEGF2Ni1iUkxmvzTy2A6Y5kTUmBUMPJKQMCxcYbE";
    window.supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON);
  </script>

  <script src="app.js"></script>
</body>
</html>
