<!doctype html>
<html lang="mr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ITCT Admission System (Cloud)</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- HEADER -->
  <header class="header">
    <div class="header-inner">
      <img src="logo.jpg" alt="ITCT Logo" class="logo" onerror="this.style.display='none'">
      <div class="title">
        <div class="name">ITCT Computer Education</div>
        <div class="location">Nandurbar</div>
      </div>
    </div>
    <p class="sub">Admission System тАУ Supabase Cloud</p>
  </header>

  <main>
    <!-- ========== LOGIN ========== -->
    <section id="login-section" class="card">
      <h2>ЁЯФР Login</h2>
      <p class="note">рдХреГрдкрдпрд╛ admin рдХрд┐рдВрд╡рд╛ user credentials рд╡рд╛рдкрд░реВрди рд▓реЙрдЧрд┐рди рдХрд░рд╛.</p>
      <input id="login-username" placeholder="Username">
      <input id="login-password" type="password" placeholder="Password">
      <div class="row" style="margin-top:8px;">
        <button id="login-btn">Login</button>
      </div>
    </section>

    <!-- ========== MAIN APP ========== -->
    <section id="app-section" class="hidden">
      <!-- User bar -->
      <div id="user-bar" class="card user-bar">
        <div>
          ЁЯСд Logged in as: <strong id="current-user-name"></strong>
          (<span id="current-user-role"></span>)
        </div>
        <button id="logout-btn" class="secondary">Logout</button>
      </div>

      <!-- Toolbar -->
      <div class="toolbar">
        <button id="dashboard-btn">ЁЯПа Dashboard</button>
        <button id="manage-courses-btn">ЁЯУЪ Courses</button>
        <button id="add-student-btn">тЮХ рдирд╡реАрди рд╡рд┐рджреНрдпрд╛рд░реНрдереА</button>
        <button id="enquiry-btn">ЁЯУЭ Enquiry</button>
        <button id="students-list-btn">ЁЯСе Student List</button>
        <button id="reports-btn">ЁЯУК Reports</button>
        <button id="settings-btn">тЪЩя╕П Settings</button>
        <button id="backup-btn" class="hidden">тШБ Backup</button>
      </div>

      <!-- Dashboard -->
      <section id="dashboard-section" class="card">
        <h3>ЁЯУК Dashboard</h3>
        <p class="note">рдЗрдереЗ рдПрдХреВрдг рд╡рд┐рджреНрдпрд╛рд░реНрдереА рд╡ рдлреАрдЪреА quick summary рджрд┐рд╕реЗрд▓.</p>
        <div id="dash-total-students">Total students: 0</div>
        <div id="dash-total-fee">Total course fee: тВ╣0</div>
        <div id="dash-total-paid">Total paid: тВ╣0</div>
        <div id="dash-total-discount">Total discount: тВ╣0</div>
        <div id="dash-total-balance">Total balance: тВ╣0</div>
      </section>

      <!-- Courses -->
      <section id="courses-section" class="card hidden">
        <h3>ЁЯУЪ Courses</h3>
        <p class="note">рдЗрдереЗ рдирд╡реАрди course add рдХрд░рд╛ рдХрд┐рдВрд╡рд╛ рд╡рд┐рджреНрдпрдорд╛рди courses рдкрд╛рд╣рд╛.</p>
        <div class="row">
          <input id="course-name" placeholder="Course name">
          <input id="course-fee" placeholder="Fee (тВ╣)" type="number">
          <button id="add-course-btn">Add Course</button>
        </div>
        <ul id="courses-list"></ul>
      </section>

      <!-- Student form -->
      <section id="student-form" class="card hidden">
        <h3>ЁЯз╛ рд╡рд┐рджреНрдпрд╛рд░реНрдереНрдпрд╛рдЪреА рдорд╛рд╣рд┐рддреА</h3>
        <p class="note">рдирд╡реАрди admission рд╕рд╛рдареА рд╡рд┐рджреНрдпрд╛рд░реНрдереНрдпрд╛рдЪреА рдорд╛рд╣рд┐рддреА рднрд░рд╛.</p>
        <input id="name" placeholder="рдирд╛рд╡ *">
        <input id="dob" placeholder="DOB (YYYY-MM-DD)">
        <input id="age" placeholder="рд╡рдп">
        <input id="address" placeholder="рдкрддреНрддрд╛">
        <input id="mobile" placeholder="рдореЛрдмрд╛рдИрд▓ 1 *" maxlength="10">
        <input id="mobile2" placeholder="рдореЛрдмрд╛рдИрд▓ 2 (optional)" maxlength="10">
        <hr>
        <h4>ЁЯОУ Course рдорд╛рд╣рд┐рддреА</h4>
        <select id="course-select"></select>
        <input id="course-duedate" type="date" placeholder="Due date">
        <div class="row" style="margin-top:.5rem;">
          <button id="save-student-btn">рдЬрддрди рдХрд░рд╛</button>
          <button id="cancel-student-btn" class="secondary">рд░рджреНрдж рдХрд░рд╛</button>
        </div>
      </section>

      <!-- Enquiry section -->
      <section id="enquiry-section" class="card hidden">
        <h3>ЁЯУЭ Enquiry</h3>
        <p class="note">Institute рд▓рд╛ рдпреЗрдгрд╛рд▒реНрдпрд╛ enquiries рдЗрдереЗ рдиреЛрдВрджрд╡рд╛ рдЖрдгрд┐ рдирдВрддрд░ admission рдордзреНрдпреЗ convert рдХрд░рд╛.</p>
        <div class="enq-form">
          <input id="enq-name" placeholder="рдирд╛рд╡ *">
          <input id="enq-dob" type="date" placeholder="DOB">
          <input id="enq-age" placeholder="рд╡рдп" readonly>
          <input id="enq-mobile" placeholder="рдореЛрдмрд╛рдИрд▓ 1 *" maxlength="10">
          <input id="enq-mobile2" placeholder="рдореЛрдмрд╛рдИрд▓ 2 (optional)" maxlength="10">
          <select id="enq-course-select"></select>
          <div class="row" style="margin-top:.5rem;">
            <button id="save-enquiry-btn">Enquiry Save рдХрд░рд╛</button>
            <button id="clear-enquiry-btn" class="secondary">Clear</button>
          </div>
        </div>
        <hr>
        <h4>ЁЯУЛ Enquiry List</h4>
        <input id="enq-search" placeholder="рд╢реЛрдз... рдирд╛рд╡ / рдореЛрдмрд╛рдИрд▓ / рдХреЛрд░реНрд╕">
        <ul id="enquiry-list"></ul>
      </section>

      <!-- Students list -->
      <section id="students-list" class="card">
        <h3>ЁЯСе рд╡рд┐рджреНрдпрд╛рд░реНрдереА рдпрд╛рджреА</h3>
        <p class="note">рдЗрдереЗ рд╕рд░реНрд╡ admissions рджрд┐рд╕рддреАрд▓. Fees рд╡ reminder рдЗрдереВрди manage рдХрд░рд╛.</p>
        <input id="search" placeholder="рд╢реЛрдз... рдирд╛рд╡ / рдХреЛрд░реНрд╕ / рдореЛрдмрд╛рдИрд▓">
        <ul id="list"></ul>
      </section>

      <!-- Reports -->
      <section id="reports-section" class="card hidden">
        <h3>ЁЯУК Reports</h3>
        <p class="note">Payment, Balance, Due рдЖрдгрд┐ Enquiry reports рдЗрдереЗ рддрдпрд╛рд░ рдХрд░рд╛.</p>
        <div class="row">
          <select id="report-course">
            <option value="">-- рд╕рд░реНрд╡ рдХреЛрд░реНрд╕ --</option>
          </select>
          <input id="report-from" type="date">
          <input id="report-to" type="date">
        </div>
        <div class="row">
          <button id="generate-payment-report">Payment report</button>
          <button id="generate-balance-report">Balance report</button>
          <button id="generate-due-report">Due / Overdue report</button>
          <button id="generate-enquiry-report">Enquiry report</button>
          <button id="export-csv">Export CSV (Excel)</button>
        </div>
        <div id="report-output"></div>
      </section>

      <!-- Backup (Admin only via JS) -->
      <section id="backup-section" class="card hidden">
        <h3>тШБ Backup</h3>
        <p class="note">Students, Fees рдЖрдгрд┐ Courses рдЪреЗ CSV backup рдЗрдереЗ download рдХрд░рддрд╛ рдпреЗрддреАрд▓.</p>
        <button id="backup-students">Download Students CSV</button>
        <button id="backup-fees">Download Fees CSV</button>
        <button id="backup-courses">Download Courses CSV</button>
      </section>

      <!-- Settings -->
      <section id="settings-section" class="card hidden">
        <h3>тЪЩя╕П Settings</h3>

        <!-- Change Admin Password -->
        <div class="settings-block">
          <h4>ЁЯФС Change Admin Password</h4>
          <input id="new-pass" type="password" placeholder="New admin password">
          <button id="change-pass-btn">Change Password</button>
        </div>

        <!-- Add User -->
        <div class="settings-block">
          <h4>ЁЯСд Add User</h4>
          <input id="new-user-username" placeholder="Username">
          <input id="new-user-password" type="password" placeholder="Password">
          <select id="new-user-role">
            <option value="data-entry">Data Entry</option>
            <option value="admin">Admin</option>
          </select>
          <button id="add-user-btn">Add User</button>
          <p class="note">
            рдЯреАрдк: Users Supabase database рдордзреНрдпреЗ рдЬрддрди рд╣реЛрддрд╛рдд.
            рдлрдХреНрдд Admin user рдирд╡реАрди users add рдХрд░реВ рд╢рдХрддреЛ.
          </p>
        </div>

        <!-- User List -->
        <div class="settings-block">
          <h4>ЁЯУЬ User List</h4>
          <ul id="users-list"></ul>
          <p class="note">рдЯреАрдк: рдореБрдЦреНрдп admin user delete рдХрд░рддрд╛ рдпреЗрдгрд╛рд░ рдирд╛рд╣реА.</p>
        </div>
      </section>
    </section>
  </main>

  <!-- Template for student item -->
  <template id="student-item-tpl">
    <li class="student-item">
      <div class="info">
        <strong class="s-name"></strong>
        <div class="s-meta"></div>
      </div>
      <div class="actions">
        <button class="pay-btn">рдлреАрд╕ рднрд░рд╛</button>
        <button class="view-btn">рдкрд╣рд╛</button>
        <button class="delete-btn admin-only">рд╣рдЯрд╡рд╛</button>
      </div>
    </li>
  </template>

  <!-- Modal -->
  <div id="modal" class="hidden" aria-hidden="true"></div>

  <!-- Supabase JS (UMD) + client setup -->
  <script src="https://unpkg.com/@supabase/supabase-js@2.48.0/dist/umd/supabase.js"></script>
  <script>
    const SUPABASE_URL  = "https://lbepbdnoowbestqhfupm.supabase.co";
    const SUPABASE_ANON = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxiZXBiZG5vb3diZXN0cWhmdXBtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUwODMxMjcsImV4cCI6MjA4MDY1OTEyN30.wH-fEGF2Ni1iUkxmvzTy2A6Y5kTUmBUMPJKQMCxcYbE";
    window.supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON);
  </script>

  <script src="app.js"></script>
</body>
</html>
